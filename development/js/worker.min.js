/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _rsgChess = __webpack_require__(1);

self.addEventListener('message', function (e) {
  if (e.data && e.data.game) {
    // Clone the game configuration to access all game associated methods.
    // This usually doesn't make sense, but you cannot post to a web-worker
    // and that's why we're touching the game methods from new game configuration intead from the passed arguments.
    // So if you pass {board: [myBoard], turn:[myTurn],...} for the game argument it will actually work!
    // Already described here: https://github.com/RSG-Group/Chess/issues/8#issuecomment-381245794
    var gameState = e.data && e.data.game;
    var game = _rsgChess.Game.prototype.initializeGame();
    game.board = gameState.board;
    game.turn = gameState.turn;
    game.threefold = gameState.threefold;
    game.FEN = gameState.FEN;
    game.FENboard = gameState.FENboard;

    var bestMove = (0, _rsgChess.AI)(3, game, true);
    self.postMessage(bestMove);
  }
}); // self.importScripts("game.js");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

!function(t,o){ true?module.exports=o():"function"==typeof define&&define.amd?define("rsg-chess",[],o):"object"==typeof exports?exports["rsg-chess"]=o():t["rsg-chess"]=o()}("undefined"!=typeof self?self:this,function(){return function(t){function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}var e={};return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},o.p="",o(o.s=3)}([function(t,o,e){"use strict";function r(t){this.board=[];for(var o=0;o<8;o++){for(var e=[],r=0;r<8;r++)e.push(null);this.board.push(e)}this.turn=[],this.FEN=[],this.FENboard=[],this.threefold=[]}Object.defineProperty(o,"__esModule",{value:!0});var i=e(1),n=e(2),a=function(t){return t&&t.__esModule?t:{default:t}}(n);r.prototype.piece=function(t,o,e,r){var n=i.Piece[t](o,e,r,this);this.board[e][o]=n,this.FEN=this.gameToFEN(),this.FENboard=this.boardToFEN()},r.prototype.moveSelected=function(t,o,e,r,i,n,c){var u=o.x,s=o.y;if(t){var l={x:t.x,y:t.y};if(this.board[s][u]!==t){for(var h=t.getValidMoves(!c),p=null,f=0;f<h.length;f++){var y=h[f];if(y.x===u&&y.y===s){p=y;break}}if(!p)return!1;var v,d,m,x=p.movePiece;x&&(v=x.from,d=x.to,null===d?this.board[v.y][v.x]=null:(m=this.board[v.y][v.x],this.board[d.y][d.x]=m,m.x=d.x,m.y=d.y,this.board[v.y][v.x]=null));var g=this.board[s][u]?this.board[s][u]:null;x=x?p.movePiece:null,this.turn.push({from:l,to:o,color:t.color,type:t.type,piece:g,movePiece:x}),this.board[s][u]=t,this.board[t.y][t.x]=null,this.board[s][u].x=u,this.board[s][u].y=s,this.FEN=this.gameToFEN(),this.FENboard=this.boardToFEN(),this.threefold.push(this.FENboard),("pawn"===t.type||g)&&(this.threefold=[]),this.threefoldCheck()&&r("D"),this.halfmoveClock()>=50&&r("D"),"pawn"===t.type&&("W"===t.color&&0===s||"B"===t.color&&7===s)&&e&&(!i&&n&&"B"===t.color?this.promotePawn(t,u,s,t.color,"queen"):e(t,u,s,t.color));var b="W"===t.color?"B":"W",k=this.checkmate(b);if(k&&r(k),i){var M=(0,a.default)(i.depth,this,!1);this.moveSelected(this.board[M.from.y][M.from.x],M.to,e,r,!1,!0,c)}}return t=null,!0}},r.prototype.promotePawn=function(t,o,e,r,i){this.piece(i,o,e,r)},r.prototype.simulateAndFilter=function(t,o){var e=[],r=this,i=this.board;return t.forEach(function(t,n){var a=t.y,c=t.x,u={x:o.x,y:o.y},s=i[a][c]?{piece:i[a][c],from:{x:c,y:a},to:null}:null;t.movePiece&&(s=t.movePiece),s&&r.simpleMovePiece(s.piece,s.from,s.to),r.simpleMovePiece(o,u,{x:c,y:a});var l=r.warning(o.color);r.simpleMovePiece(o,{x:c,y:a},u),s&&r.simpleMovePiece(s.piece,s.to,s.from),l||e.push(t)}),e},r.prototype.checkmate=function(t){for(var o=0;o<8;o++)for(var e=0;e<8;e++)if(this.board[o][e]&&this.board[o][e].color===t&&this.board[o][e].getValidMoves(!0).length)return!1;return this.warning(t)?t:"D"},r.prototype.simpleMovePiece=function(t,o,e){var r=this.board;e&&(r[e.y][e.x]=t,t.x=e.x,t.y=e.y),o&&(r[o.y][o.x]=null)},r.prototype.simpleMove=function(t){var o=this,e=o.board,r=t.from,i=t.to,n=e[r.y][r.x],a=this.board[i.y][i.x]?this.board[i.y][i.x]:null,c=e[i.y][i.x]?{piece:e[i.y][i.x],from:{x:i.x,y:i.y},to:null}:null;return this.turn.push({from:r,to:{x:i.x,y:i.y},color:t.color,type:n.type,piece:a,movePiece:c}),i.movePiece&&(c=i.movePiece),c&&o.simpleMovePiece(c.piece,c.from,c.to),o.simpleMovePiece(n,r,{x:i.x,y:i.y}),function(){c&&o.simpleMovePiece(c.piece,c.to,c.from),o.simpleMovePiece(n,{x:i.x,y:i.y},r),a&&(e[i.y][i.x]=a),o.turn.pop()}},r.prototype.warning=function(t){var o,e=!1;return this.board.forEach(function(e){e.forEach(function(e){e&&e.color===t&&"king"===e.type&&(o=e)})}),this.board.forEach(function(r){r.forEach(function(r){r&&r.color!==t&&r.getValidMoves().forEach(function(t){t.x===o.x&&t.y===o.y&&(e=!0)})})}),e},r.prototype.threefoldCheck=function(){for(var t=this.threefold,o=t.length,e=0;e<o;e++){for(var r=0,i=e+1;i<o;i++)t[e]===t[i]&&(r+=1);if(r>=2)return!0}return!1},r.prototype.pieceToAN=function(t,o){return"abcdefgh".charAt(t)+(8-o)},r.prototype.boardToFEN=function(){for(var t=this.board,o="",e=0,r=0;r<8;r++){for(var i=0;i<8;i++)t[r][i]?(e&&(o+=e),e=0,o+=t[r][i].FENname):e++;e&&(o+=e),e=0,o+=r<7?"/":""}return o},r.prototype.halfmoveClock=function(){var t=this.turn,o=t.length,e=0;if(0===t.length)return e;for(var r=t[o-1-e];e<=o-1&&"pawn"!==r.type&&!r.piece;)e++,r=t[o-1-e];return e},r.prototype.activeColour=function(){var t=this.turn;return t.length&&"W"===t[t.length-1].color?"b":"w"},r.prototype.castlingTarget=function(){var t,o,e=this.board,r=this.turn,i="";return r.forEach(function(e){t="king"===e.type&&"W"===e.color,o="king"===e.type&&"B"===e.color}),[[7,0],[0,0],[7,7],[0,7]].forEach(function(n){var a=n[0],c=n[1],u=e[c][a];if((7!==c||!t)&&(0!==c||!o)&&u&&"rook"!==!u.type&&!r.some(function(t){return"rook"===t.type&&(t.from.x===a&&t.from.y===c)})){var s=0===a?"q":"k";i+=0===c?s.toUpperCase():s}}),i||(i="-"),i},r.prototype.enPassantTarget=function(){var t=this.turn,o="";if(t.length){var e=t[t.length-1];"W"===e.color&&4===e.to.y&&(o=this.pieceToAN(e.to.x,e.to.y+1)),"B"===e.color&&3===e.to.y&&(o=this.pieceToAN(e.to.x,e.to.y-1))}return o||(o="-"),o},r.prototype.fullmoveCount=function(){var t=1;return this.turn.forEach(function(o){"B"===o.color&&(t+=1)}),t},r.prototype.gameToFEN=function(){var t="";return t+=this.boardToFEN(),t+=" "+this.activeColour(),t+=" "+this.castlingTarget(),t+=" "+this.enPassantTarget(),t+=" "+this.halfmoveClock(),t+=" "+this.fullmoveCount()},r.prototype.initializeGame=function(){for(var t=new r,o=0;o<8;o++)t.piece("pawn",o,6,"W"),t.piece("pawn",o,1,"B");return t.piece("rook",0,0,"B"),t.piece("knight",1,0,"B"),t.piece("bishop",2,0,"B"),t.piece("queen",3,0,"B"),t.piece("king",4,0,"B"),t.piece("bishop",5,0,"B"),t.piece("knight",6,0,"B"),t.piece("rook",7,0,"B"),t.piece("rook",0,7,"W"),t.piece("knight",1,7,"W"),t.piece("bishop",2,7,"W"),t.piece("queen",3,7,"W"),t.piece("king",4,7,"W"),t.piece("bishop",5,7,"W"),t.piece("knight",6,7,"W"),t.piece("rook",7,7,"W"),t},r.prototype.allMoves=function(){for(var t=this.board,o=[],e=this.activeColour().toUpperCase(),r=0;r<8;r++)for(var i=0;i<8;i++)if(t[r][i]&&t[r][i].color===e){var n=t[r][i].getValidMoves(!0);n.forEach(function(e){o.push({color:t[r][i].color,from:{x:i,y:r},to:e,FENname:t[r][i].FENname})})}return o},o.default=r},function(t,o,e){"use strict";function r(t,o,e,r,i,n){if(e&&(this.char=e[r]),this.color=r,this.x=t,this.y=o,this.game=i,this.type=n,n){var a="knight"===n?"n":n.charAt(0);"W"===this.color&&(a=a.toUpperCase()),this.FENname=a}}function i(t,o,e,i){r.call(this,t,o,l.pawn,e,i,"pawn")}function n(t,o,e,i){r.call(this,t,o,l.rook,e,i,"rook")}function a(t,o,e,i){r.call(this,t,o,l.knight,e,i,"knight")}function c(t,o,e,i){r.call(this,t,o,l.bishop,e,i,"bishop")}function u(t,o,e,i){r.call(this,t,o,l.queen,e,i,"queen")}function s(t,o,e,i){r.call(this,t,o,l.king,e,i,"king")}Object.defineProperty(o,"__esModule",{value:!0});var l=o.PIECE_CHARS={pawn:{W:"♙",B:"♟"},rook:{W:"♖",B:"♜"},knight:{W:"♘",B:"♞"},bishop:{W:"♗",B:"♝"},queen:{W:"♕",B:"♛"},king:{W:"♔",B:"♚"}};r.empty=function(){return new r},r.prototype.getValidMoves=function(){return[{x:0,y:0},{x:7,y:7}]},i.prototype=r.empty(),i.prototype.getValidMoves=function(t){var o,e,r=this.game,i=[],n=this.y,a=this.x,c=r.board,u=r.turn,s=u.length,l="W"===this.color?n-1:n+1,h="W"===this.color?n-2:n+2,p=(this.color,[a-1,a+1]);l<8&&l>=0&&!c[l][a]&&(i.push({x:a,y:l}),(1===n||6===n)&&h<8&&h>=0&&!r.board[h][a]&&i.push({x:a,y:h}));for(var f=0;f<2;f++)e=p[f],l<8&&l>=0&&c[l][e]&&c[l][e].color!==this.color&&i.push({x:e,y:l});for(var y=0;y<2;y++)e=p[y],!(o=u[s-1])||"pawn"!==o.type||o.to.x!==e||o.to.y!==n||o.color===this.color||1!==o.from.y&&6!==o.from.y||3!==n&&4!==n||i.push({x:e,y:l,movePiece:{piece:r.board[n][e],from:{x:e,y:n},to:null}});return t?r.simulateAndFilter(i,this):i},r.pawn=function(t,o,e,r){return new i(t,o,e,r)},n.prototype=r.empty(),n.prototype.getValidMoves=function(t){var o=this.game,e=[];[[-1,0],[1,0],[0,1],[0,-1]].forEach(function(t){var r,i,n,a;for(r=1;(i=this.x+t[0]*r,!((n=this.y+t[1]*r)<0||n>7||i<0||i>7))&&(!(a=o.board[n][i])||a.color!==this.color)&&(e.push({x:i,y:n}),!a);r++);},this);return t?o.simulateAndFilter(e,this):e},r.rook=function(t,o,e,r){return new n(t,o,e,r)},a.prototype=r.empty(),a.prototype.getValidMoves=function(t){for(var o,e,r=this.game,i=[],n=[[2,1],[-2,1],[1,2],[-1,2],[2,-1],[-2,-1],[1,-2],[-1,-2]],a=0;a<n.length;a++){var c,u=!1;o=n[a][0],e=n[a][1],this.x+o<8&&this.x+o>=0&&this.y+e<8&&this.y+e>=0&&(c=r.board[this.y+e][this.x+o],u=!c||c.color!==this.color),u&&i.push({x:this.x+o,y:this.y+e})}return t?r.simulateAndFilter(i,this):i},r.knight=function(t,o,e,r){return new a(t,o,e,r)},c.prototype=r.empty(),c.prototype.getValidMoves=function(t){var o=this.game,e=[];[[-1,-1],[1,1],[-1,1],[1,-1]].forEach(function(t){var r,i,n,a;for(r=1;(i=this.x+t[0]*r,!((n=this.y+t[1]*r)<0||n>7||i<0||i>7))&&(!(a=o.board[n][i])||a.color!==this.color)&&(e.push({x:i,y:n}),!a);r++);},this);return t?o.simulateAndFilter(e,this):e},r.bishop=function(t,o,e,r){return new c(t,o,e,r)},u.prototype=r.empty(),u.prototype.getValidMoves=function(t){var o=this.game,e=n.prototype.getValidMoves.call(this),r=c.prototype.getValidMoves.call(this),i=e.concat(r);return t?o.simulateAndFilter(i,this):i},r.queen=function(t,o,e,r){return new u(t,o,e,r)},s.prototype=r.empty(),s.prototype.getValidMoves=function(t){var o=[],e=[[0,1],[0,-1],[1,1],[-1,-1],[1,-1],[-1,1],[-1,0],[1,0]],r=this.x,i=this.y,n=this.game,a=n.turn,c=this;e.forEach(function(t){var e,a=r+t[0],u=i+t[1];a<8&&a>=0&&u<8&&u>=0&&((e=n.board[u][a])&&e.color===c.color||o.push({x:a,y:u}))}),a.some(function(t){return"king"===t.type&&t.color===c.color})||[[0,2,-1],[7,6,1]].forEach(function(t){var e=t[0],u=t[1],s=t[2],l=n.board[i][e];if(l&&"rook"!==!l.type&&!a.some(function(t){return t.from.x===e&&t.from.y===i})){for(var h=r+s;h!==e;h+=s){if(n.board[i][h])return;var p=!0;if(n.board.forEach(function(t){t.forEach(function(t){t&&"king"!==t.type&&t.color!==c.color&&t.getValidMoves().forEach(function(t){t&&t.y===i&&t.x===h&&(p=!1)})})}),!p)return}var f={x:u,y:i,movePiece:{piece:c.game.board[i][e],from:{x:e,y:i},to:{y:i,x:r+s}}};o.push(f)}});return t?n.simulateAndFilter(o,c):o},r.king=function(t,o,e,r){return new s(t,o,e,r)},o.Piece=r,o.Pawn=i,o.Rook=n,o.Knight=a,o.Bishop=c,o.Queen=u,o.King=s},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r),n=function(t,o,e){var r=i.default.prototype.initializeGame();r.board=o.board,r.turn=o.turn,r.threefold=o.threefold,r.FEN=o.FEN,r.FENboard=o.FENboard;for(var n,c=r.allMoves(),u=-9999,s=0;s<c.length;s++){var l=c[s],h=r.simpleMove(l),p=a(t-1,r,-1e4,1e4,!e);h(),p>=u&&(u=p,n=l)}return n},a=function t(o,e,r,i,n){if(0===o)return-c(e.board);var a=e.allMoves();if(n){for(var u=-9999,s=0;s<a.length;s++){var l=e.simpleMove(a[s]);if(u=Math.max(u,t(o-1,e,r,i,!n)),l(),r=Math.max(r,u),i<=r)return u}return u}for(var h=9999,p=0;p<a.length;p++){var f=e.simpleMove(a[p]);if(h=Math.min(h,t(o-1,e,r,i,!n)),f(),(i=Math.min(i,h))<=r)return h}return h},c=function(t){for(var o=0,e=0;e<8;e++)for(var r=0;r<8;r++)o+=u(t[e][r]);return o},u=function(t){if(null===t)return 0;var o=function(t){return"pawn"===t.type?10:"rook"===t.type?50:"knight"===t.type?30:"bishop"===t.type?30:"queen"===t.type?90:"king"===t.type?900:void 0}(t,t.color);return"W"===t.color?o:-o};o.default=n},function(t,o,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(o,"__esModule",{value:!0}),o.AI=o.Pieces=o.Game=void 0;var i=e(0),n=r(i),a=e(1),c=function(t){if(t&&t.__esModule)return t;var o={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e]);return o.default=t,o}(a),u=e(2),s=r(u);o.Game=n.default,o.Pieces=c,o.AI=s.default}])});
//# sourceMappingURL=index.js.map

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMGFhYzMwN2I5NjhjYjA1OTlmYTgiLCJ3ZWJwYWNrOi8vLy4vanMvd29ya2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yc2ctY2hlc3MvbGliL2luZGV4LmpzIl0sIm5hbWVzIjpbInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRhdGEiLCJnYW1lIiwiZ2FtZVN0YXRlIiwicHJvdG90eXBlIiwiaW5pdGlhbGl6ZUdhbWUiLCJib2FyZCIsInR1cm4iLCJ0aHJlZWZvbGQiLCJGRU4iLCJGRU5ib2FyZCIsImJlc3RNb3ZlIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7OztBQzVEQTs7QUFFQUEsS0FBS0MsZ0JBQUwsQ0FBc0IsU0FBdEIsRUFBaUMsVUFBVUMsQ0FBVixFQUFhO0FBQzVDLE1BQUlBLEVBQUVDLElBQUYsSUFBVUQsRUFBRUMsSUFBRixDQUFPQyxJQUFyQixFQUEyQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBSUMsWUFBWUgsRUFBRUMsSUFBRixJQUFVRCxFQUFFQyxJQUFGLENBQU9DLElBQWpDO0FBQ0EsUUFBSUEsT0FBTyxlQUFLRSxTQUFMLENBQWVDLGNBQWYsRUFBWDtBQUNB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a0IsU0FBUyxlQUFlLHFCQUFxQixrQkFBa0IscUlBQXFJLFlBQVksMEJBQTBCLFlBQVksaUJBQWlCLGFBQWEsY0FBYywwQkFBMEIsV0FBVyxzQ0FBc0MsU0FBUyw4QkFBOEIsdUNBQXVDLDRCQUE0QixTQUFTLGlGQUFpRixxQkFBcUIsa0JBQWtCLDJDQUEyQyxHQUFHO0FBQzN1WCxpQyIsImZpbGUiOiJ3b3JrZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMGFhYzMwN2I5NjhjYjA1OTlmYTgiLCIvLyBzZWxmLmltcG9ydFNjcmlwdHMoXCJnYW1lLmpzXCIpO1xyXG5pbXBvcnQgeyBHYW1lLCBBSSB9IGZyb20gJ3JzZy1jaGVzcydcclxuXHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGUuZGF0YSAmJiBlLmRhdGEuZ2FtZSkge1xyXG4gICAgLy8gQ2xvbmUgdGhlIGdhbWUgY29uZmlndXJhdGlvbiB0byBhY2Nlc3MgYWxsIGdhbWUgYXNzb2NpYXRlZCBtZXRob2RzLlxyXG4gICAgLy8gVGhpcyB1c3VhbGx5IGRvZXNuJ3QgbWFrZSBzZW5zZSwgYnV0IHlvdSBjYW5ub3QgcG9zdCB0byBhIHdlYi13b3JrZXJcclxuICAgIC8vIGFuZCB0aGF0J3Mgd2h5IHdlJ3JlIHRvdWNoaW5nIHRoZSBnYW1lIG1ldGhvZHMgZnJvbSBuZXcgZ2FtZSBjb25maWd1cmF0aW9uIGludGVhZCBmcm9tIHRoZSBwYXNzZWQgYXJndW1lbnRzLlxyXG4gICAgLy8gU28gaWYgeW91IHBhc3Mge2JvYXJkOiBbbXlCb2FyZF0sIHR1cm46W215VHVybl0sLi4ufSBmb3IgdGhlIGdhbWUgYXJndW1lbnQgaXQgd2lsbCBhY3R1YWxseSB3b3JrIVxyXG4gICAgLy8gQWxyZWFkeSBkZXNjcmliZWQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL1JTRy1Hcm91cC9DaGVzcy9pc3N1ZXMvOCNpc3N1ZWNvbW1lbnQtMzgxMjQ1Nzk0XHJcbiAgICB2YXIgZ2FtZVN0YXRlID0gZS5kYXRhICYmIGUuZGF0YS5nYW1lXHJcbiAgICB2YXIgZ2FtZSA9IEdhbWUucHJvdG90eXBlLmluaXRpYWxpemVHYW1lKClcclxuICAgIGdhbWUuYm9hcmQgPSBnYW1lU3RhdGUuYm9hcmRcclxuICAgIGdhbWUudHVybiA9IGdhbWVTdGF0ZS50dXJuXHJcbiAgICBnYW1lLnRocmVlZm9sZCA9IGdhbWVTdGF0ZS50aHJlZWZvbGRcclxuICAgIGdhbWUuRkVOID0gZ2FtZVN0YXRlLkZFTlxyXG4gICAgZ2FtZS5GRU5ib2FyZCA9IGdhbWVTdGF0ZS5GRU5ib2FyZFxyXG5cclxuICAgIHZhciBiZXN0TW92ZSA9IEFJKDMsIGdhbWUsIHRydWUpXHJcbiAgICBzZWxmLnBvc3RNZXNzYWdlKGJlc3RNb3ZlKVxyXG4gIH1cclxufSlcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvd29ya2VyLmpzIiwiIWZ1bmN0aW9uKHQsbyl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bygpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJyc2ctY2hlc3NcIixbXSxvKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzW1wicnNnLWNoZXNzXCJdPW8oKTp0W1wicnNnLWNoZXNzXCJdPW8oKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG8ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBpPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLG8pLGkubD0hMCxpLmV4cG9ydHN9dmFyIGU9e307cmV0dXJuIG8ubT10LG8uYz1lLG8uZD1mdW5jdGlvbih0LGUscil7by5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LG8ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gby5kKGUsXCJhXCIsZSksZX0sby5vPWZ1bmN0aW9uKHQsbyl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG8pfSxvLnA9XCJcIixvKG8ucz0zKX0oW2Z1bmN0aW9uKHQsbyxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3RoaXMuYm9hcmQ9W107Zm9yKHZhciBvPTA7bzw4O28rKyl7Zm9yKHZhciBlPVtdLHI9MDtyPDg7cisrKWUucHVzaChudWxsKTt0aGlzLmJvYXJkLnB1c2goZSl9dGhpcy50dXJuPVtdLHRoaXMuRkVOPVtdLHRoaXMuRkVOYm9hcmQ9W10sdGhpcy50aHJlZWZvbGQ9W119T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZSgxKSxuPWUoMiksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KG4pO3IucHJvdG90eXBlLnBpZWNlPWZ1bmN0aW9uKHQsbyxlLHIpe3ZhciBuPWkuUGllY2VbdF0obyxlLHIsdGhpcyk7dGhpcy5ib2FyZFtlXVtvXT1uLHRoaXMuRkVOPXRoaXMuZ2FtZVRvRkVOKCksdGhpcy5GRU5ib2FyZD10aGlzLmJvYXJkVG9GRU4oKX0sci5wcm90b3R5cGUubW92ZVNlbGVjdGVkPWZ1bmN0aW9uKHQsbyxlLHIsaSxuLGMpe3ZhciB1PW8ueCxzPW8ueTtpZih0KXt2YXIgbD17eDp0LngseTp0Lnl9O2lmKHRoaXMuYm9hcmRbc11bdV0hPT10KXtmb3IodmFyIGg9dC5nZXRWYWxpZE1vdmVzKCFjKSxwPW51bGwsZj0wO2Y8aC5sZW5ndGg7ZisrKXt2YXIgeT1oW2ZdO2lmKHkueD09PXUmJnkueT09PXMpe3A9eTticmVha319aWYoIXApcmV0dXJuITE7dmFyIHYsZCxtLHg9cC5tb3ZlUGllY2U7eCYmKHY9eC5mcm9tLGQ9eC50byxudWxsPT09ZD90aGlzLmJvYXJkW3YueV1bdi54XT1udWxsOihtPXRoaXMuYm9hcmRbdi55XVt2LnhdLHRoaXMuYm9hcmRbZC55XVtkLnhdPW0sbS54PWQueCxtLnk9ZC55LHRoaXMuYm9hcmRbdi55XVt2LnhdPW51bGwpKTt2YXIgZz10aGlzLmJvYXJkW3NdW3VdP3RoaXMuYm9hcmRbc11bdV06bnVsbDt4PXg/cC5tb3ZlUGllY2U6bnVsbCx0aGlzLnR1cm4ucHVzaCh7ZnJvbTpsLHRvOm8sY29sb3I6dC5jb2xvcix0eXBlOnQudHlwZSxwaWVjZTpnLG1vdmVQaWVjZTp4fSksdGhpcy5ib2FyZFtzXVt1XT10LHRoaXMuYm9hcmRbdC55XVt0LnhdPW51bGwsdGhpcy5ib2FyZFtzXVt1XS54PXUsdGhpcy5ib2FyZFtzXVt1XS55PXMsdGhpcy5GRU49dGhpcy5nYW1lVG9GRU4oKSx0aGlzLkZFTmJvYXJkPXRoaXMuYm9hcmRUb0ZFTigpLHRoaXMudGhyZWVmb2xkLnB1c2godGhpcy5GRU5ib2FyZCksKFwicGF3blwiPT09dC50eXBlfHxnKSYmKHRoaXMudGhyZWVmb2xkPVtdKSx0aGlzLnRocmVlZm9sZENoZWNrKCkmJnIoXCJEXCIpLHRoaXMuaGFsZm1vdmVDbG9jaygpPj01MCYmcihcIkRcIiksXCJwYXduXCI9PT10LnR5cGUmJihcIldcIj09PXQuY29sb3ImJjA9PT1zfHxcIkJcIj09PXQuY29sb3ImJjc9PT1zKSYmZSYmKCFpJiZuJiZcIkJcIj09PXQuY29sb3I/dGhpcy5wcm9tb3RlUGF3bih0LHUscyx0LmNvbG9yLFwicXVlZW5cIik6ZSh0LHUscyx0LmNvbG9yKSk7dmFyIGI9XCJXXCI9PT10LmNvbG9yP1wiQlwiOlwiV1wiLGs9dGhpcy5jaGVja21hdGUoYik7aWYoayYmcihrKSxpKXt2YXIgTT0oMCxhLmRlZmF1bHQpKGkuZGVwdGgsdGhpcywhMSk7dGhpcy5tb3ZlU2VsZWN0ZWQodGhpcy5ib2FyZFtNLmZyb20ueV1bTS5mcm9tLnhdLE0udG8sZSxyLCExLCEwLGMpfX1yZXR1cm4gdD1udWxsLCEwfX0sci5wcm90b3R5cGUucHJvbW90ZVBhd249ZnVuY3Rpb24odCxvLGUscixpKXt0aGlzLnBpZWNlKGksbyxlLHIpfSxyLnByb3RvdHlwZS5zaW11bGF0ZUFuZEZpbHRlcj1mdW5jdGlvbih0LG8pe3ZhciBlPVtdLHI9dGhpcyxpPXRoaXMuYm9hcmQ7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0LG4pe3ZhciBhPXQueSxjPXQueCx1PXt4Om8ueCx5Om8ueX0scz1pW2FdW2NdP3twaWVjZTppW2FdW2NdLGZyb206e3g6Yyx5OmF9LHRvOm51bGx9Om51bGw7dC5tb3ZlUGllY2UmJihzPXQubW92ZVBpZWNlKSxzJiZyLnNpbXBsZU1vdmVQaWVjZShzLnBpZWNlLHMuZnJvbSxzLnRvKSxyLnNpbXBsZU1vdmVQaWVjZShvLHUse3g6Yyx5OmF9KTt2YXIgbD1yLndhcm5pbmcoby5jb2xvcik7ci5zaW1wbGVNb3ZlUGllY2Uobyx7eDpjLHk6YX0sdSkscyYmci5zaW1wbGVNb3ZlUGllY2Uocy5waWVjZSxzLnRvLHMuZnJvbSksbHx8ZS5wdXNoKHQpfSksZX0sci5wcm90b3R5cGUuY2hlY2ttYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbz0wO288ODtvKyspZm9yKHZhciBlPTA7ZTw4O2UrKylpZih0aGlzLmJvYXJkW29dW2VdJiZ0aGlzLmJvYXJkW29dW2VdLmNvbG9yPT09dCYmdGhpcy5ib2FyZFtvXVtlXS5nZXRWYWxpZE1vdmVzKCEwKS5sZW5ndGgpcmV0dXJuITE7cmV0dXJuIHRoaXMud2FybmluZyh0KT90OlwiRFwifSxyLnByb3RvdHlwZS5zaW1wbGVNb3ZlUGllY2U9ZnVuY3Rpb24odCxvLGUpe3ZhciByPXRoaXMuYm9hcmQ7ZSYmKHJbZS55XVtlLnhdPXQsdC54PWUueCx0Lnk9ZS55KSxvJiYocltvLnldW28ueF09bnVsbCl9LHIucHJvdG90eXBlLnNpbXBsZU1vdmU9ZnVuY3Rpb24odCl7dmFyIG89dGhpcyxlPW8uYm9hcmQscj10LmZyb20saT10LnRvLG49ZVtyLnldW3IueF0sYT10aGlzLmJvYXJkW2kueV1baS54XT90aGlzLmJvYXJkW2kueV1baS54XTpudWxsLGM9ZVtpLnldW2kueF0/e3BpZWNlOmVbaS55XVtpLnhdLGZyb206e3g6aS54LHk6aS55fSx0bzpudWxsfTpudWxsO3JldHVybiB0aGlzLnR1cm4ucHVzaCh7ZnJvbTpyLHRvOnt4OmkueCx5OmkueX0sY29sb3I6dC5jb2xvcix0eXBlOm4udHlwZSxwaWVjZTphLG1vdmVQaWVjZTpjfSksaS5tb3ZlUGllY2UmJihjPWkubW92ZVBpZWNlKSxjJiZvLnNpbXBsZU1vdmVQaWVjZShjLnBpZWNlLGMuZnJvbSxjLnRvKSxvLnNpbXBsZU1vdmVQaWVjZShuLHIse3g6aS54LHk6aS55fSksZnVuY3Rpb24oKXtjJiZvLnNpbXBsZU1vdmVQaWVjZShjLnBpZWNlLGMudG8sYy5mcm9tKSxvLnNpbXBsZU1vdmVQaWVjZShuLHt4OmkueCx5OmkueX0sciksYSYmKGVbaS55XVtpLnhdPWEpLG8udHVybi5wb3AoKX19LHIucHJvdG90eXBlLndhcm5pbmc9ZnVuY3Rpb24odCl7dmFyIG8sZT0hMTtyZXR1cm4gdGhpcy5ib2FyZC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtlJiZlLmNvbG9yPT09dCYmXCJraW5nXCI9PT1lLnR5cGUmJihvPWUpfSl9KSx0aGlzLmJvYXJkLmZvckVhY2goZnVuY3Rpb24ocil7ci5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ImJnIuY29sb3IhPT10JiZyLmdldFZhbGlkTW92ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QueD09PW8ueCYmdC55PT09by55JiYoZT0hMCl9KX0pfSksZX0sci5wcm90b3R5cGUudGhyZWVmb2xkQ2hlY2s9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy50aHJlZWZvbGQsbz10Lmxlbmd0aCxlPTA7ZTxvO2UrKyl7Zm9yKHZhciByPTAsaT1lKzE7aTxvO2krKyl0W2VdPT09dFtpXSYmKHIrPTEpO2lmKHI+PTIpcmV0dXJuITB9cmV0dXJuITF9LHIucHJvdG90eXBlLnBpZWNlVG9BTj1mdW5jdGlvbih0LG8pe3JldHVyblwiYWJjZGVmZ2hcIi5jaGFyQXQodCkrKDgtbyl9LHIucHJvdG90eXBlLmJvYXJkVG9GRU49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ib2FyZCxvPVwiXCIsZT0wLHI9MDtyPDg7cisrKXtmb3IodmFyIGk9MDtpPDg7aSsrKXRbcl1baV0/KGUmJihvKz1lKSxlPTAsbys9dFtyXVtpXS5GRU5uYW1lKTplKys7ZSYmKG8rPWUpLGU9MCxvKz1yPDc/XCIvXCI6XCJcIn1yZXR1cm4gb30sci5wcm90b3R5cGUuaGFsZm1vdmVDbG9jaz1mdW5jdGlvbigpe3ZhciB0PXRoaXMudHVybixvPXQubGVuZ3RoLGU9MDtpZigwPT09dC5sZW5ndGgpcmV0dXJuIGU7Zm9yKHZhciByPXRbby0xLWVdO2U8PW8tMSYmXCJwYXduXCIhPT1yLnR5cGUmJiFyLnBpZWNlOyllKysscj10W28tMS1lXTtyZXR1cm4gZX0sci5wcm90b3R5cGUuYWN0aXZlQ29sb3VyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50dXJuO3JldHVybiB0Lmxlbmd0aCYmXCJXXCI9PT10W3QubGVuZ3RoLTFdLmNvbG9yP1wiYlwiOlwid1wifSxyLnByb3RvdHlwZS5jYXN0bGluZ1RhcmdldD1mdW5jdGlvbigpe3ZhciB0LG8sZT10aGlzLmJvYXJkLHI9dGhpcy50dXJuLGk9XCJcIjtyZXR1cm4gci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9XCJraW5nXCI9PT1lLnR5cGUmJlwiV1wiPT09ZS5jb2xvcixvPVwia2luZ1wiPT09ZS50eXBlJiZcIkJcIj09PWUuY29sb3J9KSxbWzcsMF0sWzAsMF0sWzcsN10sWzAsN11dLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGE9blswXSxjPW5bMV0sdT1lW2NdW2FdO2lmKCg3IT09Y3x8IXQpJiYoMCE9PWN8fCFvKSYmdSYmXCJyb29rXCIhPT0hdS50eXBlJiYhci5zb21lKGZ1bmN0aW9uKHQpe3JldHVyblwicm9va1wiPT09dC50eXBlJiYodC5mcm9tLng9PT1hJiZ0LmZyb20ueT09PWMpfSkpe3ZhciBzPTA9PT1hP1wicVwiOlwia1wiO2krPTA9PT1jP3MudG9VcHBlckNhc2UoKTpzfX0pLGl8fChpPVwiLVwiKSxpfSxyLnByb3RvdHlwZS5lblBhc3NhbnRUYXJnZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnR1cm4sbz1cIlwiO2lmKHQubGVuZ3RoKXt2YXIgZT10W3QubGVuZ3RoLTFdO1wiV1wiPT09ZS5jb2xvciYmND09PWUudG8ueSYmKG89dGhpcy5waWVjZVRvQU4oZS50by54LGUudG8ueSsxKSksXCJCXCI9PT1lLmNvbG9yJiYzPT09ZS50by55JiYobz10aGlzLnBpZWNlVG9BTihlLnRvLngsZS50by55LTEpKX1yZXR1cm4gb3x8KG89XCItXCIpLG99LHIucHJvdG90eXBlLmZ1bGxtb3ZlQ291bnQ9ZnVuY3Rpb24oKXt2YXIgdD0xO3JldHVybiB0aGlzLnR1cm4uZm9yRWFjaChmdW5jdGlvbihvKXtcIkJcIj09PW8uY29sb3ImJih0Kz0xKX0pLHR9LHIucHJvdG90eXBlLmdhbWVUb0ZFTj1mdW5jdGlvbigpe3ZhciB0PVwiXCI7cmV0dXJuIHQrPXRoaXMuYm9hcmRUb0ZFTigpLHQrPVwiIFwiK3RoaXMuYWN0aXZlQ29sb3VyKCksdCs9XCIgXCIrdGhpcy5jYXN0bGluZ1RhcmdldCgpLHQrPVwiIFwiK3RoaXMuZW5QYXNzYW50VGFyZ2V0KCksdCs9XCIgXCIrdGhpcy5oYWxmbW92ZUNsb2NrKCksdCs9XCIgXCIrdGhpcy5mdWxsbW92ZUNvdW50KCl9LHIucHJvdG90eXBlLmluaXRpYWxpemVHYW1lPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyByLG89MDtvPDg7bysrKXQucGllY2UoXCJwYXduXCIsbyw2LFwiV1wiKSx0LnBpZWNlKFwicGF3blwiLG8sMSxcIkJcIik7cmV0dXJuIHQucGllY2UoXCJyb29rXCIsMCwwLFwiQlwiKSx0LnBpZWNlKFwia25pZ2h0XCIsMSwwLFwiQlwiKSx0LnBpZWNlKFwiYmlzaG9wXCIsMiwwLFwiQlwiKSx0LnBpZWNlKFwicXVlZW5cIiwzLDAsXCJCXCIpLHQucGllY2UoXCJraW5nXCIsNCwwLFwiQlwiKSx0LnBpZWNlKFwiYmlzaG9wXCIsNSwwLFwiQlwiKSx0LnBpZWNlKFwia25pZ2h0XCIsNiwwLFwiQlwiKSx0LnBpZWNlKFwicm9va1wiLDcsMCxcIkJcIiksdC5waWVjZShcInJvb2tcIiwwLDcsXCJXXCIpLHQucGllY2UoXCJrbmlnaHRcIiwxLDcsXCJXXCIpLHQucGllY2UoXCJiaXNob3BcIiwyLDcsXCJXXCIpLHQucGllY2UoXCJxdWVlblwiLDMsNyxcIldcIiksdC5waWVjZShcImtpbmdcIiw0LDcsXCJXXCIpLHQucGllY2UoXCJiaXNob3BcIiw1LDcsXCJXXCIpLHQucGllY2UoXCJrbmlnaHRcIiw2LDcsXCJXXCIpLHQucGllY2UoXCJyb29rXCIsNyw3LFwiV1wiKSx0fSxyLnByb3RvdHlwZS5hbGxNb3Zlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmJvYXJkLG89W10sZT10aGlzLmFjdGl2ZUNvbG91cigpLnRvVXBwZXJDYXNlKCkscj0wO3I8ODtyKyspZm9yKHZhciBpPTA7aTw4O2krKylpZih0W3JdW2ldJiZ0W3JdW2ldLmNvbG9yPT09ZSl7dmFyIG49dFtyXVtpXS5nZXRWYWxpZE1vdmVzKCEwKTtuLmZvckVhY2goZnVuY3Rpb24oZSl7by5wdXNoKHtjb2xvcjp0W3JdW2ldLmNvbG9yLGZyb206e3g6aSx5OnJ9LHRvOmUsRkVObmFtZTp0W3JdW2ldLkZFTm5hbWV9KX0pfXJldHVybiBvfSxvLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxvLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxvLGUscixpLG4pe2lmKGUmJih0aGlzLmNoYXI9ZVtyXSksdGhpcy5jb2xvcj1yLHRoaXMueD10LHRoaXMueT1vLHRoaXMuZ2FtZT1pLHRoaXMudHlwZT1uLG4pe3ZhciBhPVwia25pZ2h0XCI9PT1uP1wiblwiOm4uY2hhckF0KDApO1wiV1wiPT09dGhpcy5jb2xvciYmKGE9YS50b1VwcGVyQ2FzZSgpKSx0aGlzLkZFTm5hbWU9YX19ZnVuY3Rpb24gaSh0LG8sZSxpKXtyLmNhbGwodGhpcyx0LG8sbC5wYXduLGUsaSxcInBhd25cIil9ZnVuY3Rpb24gbih0LG8sZSxpKXtyLmNhbGwodGhpcyx0LG8sbC5yb29rLGUsaSxcInJvb2tcIil9ZnVuY3Rpb24gYSh0LG8sZSxpKXtyLmNhbGwodGhpcyx0LG8sbC5rbmlnaHQsZSxpLFwia25pZ2h0XCIpfWZ1bmN0aW9uIGModCxvLGUsaSl7ci5jYWxsKHRoaXMsdCxvLGwuYmlzaG9wLGUsaSxcImJpc2hvcFwiKX1mdW5jdGlvbiB1KHQsbyxlLGkpe3IuY2FsbCh0aGlzLHQsbyxsLnF1ZWVuLGUsaSxcInF1ZWVuXCIpfWZ1bmN0aW9uIHModCxvLGUsaSl7ci5jYWxsKHRoaXMsdCxvLGwua2luZyxlLGksXCJraW5nXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBsPW8uUElFQ0VfQ0hBUlM9e3Bhd246e1c6XCLimZlcIixCOlwi4pmfXCJ9LHJvb2s6e1c6XCLimZZcIixCOlwi4pmcXCJ9LGtuaWdodDp7VzpcIuKZmFwiLEI6XCLimZ5cIn0sYmlzaG9wOntXOlwi4pmXXCIsQjpcIuKZnVwifSxxdWVlbjp7VzpcIuKZlVwiLEI6XCLimZtcIn0sa2luZzp7VzpcIuKZlFwiLEI6XCLimZpcIn19O3IuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHJ9LHIucHJvdG90eXBlLmdldFZhbGlkTW92ZXM9ZnVuY3Rpb24oKXtyZXR1cm5be3g6MCx5OjB9LHt4OjcseTo3fV19LGkucHJvdG90eXBlPXIuZW1wdHkoKSxpLnByb3RvdHlwZS5nZXRWYWxpZE1vdmVzPWZ1bmN0aW9uKHQpe3ZhciBvLGUscj10aGlzLmdhbWUsaT1bXSxuPXRoaXMueSxhPXRoaXMueCxjPXIuYm9hcmQsdT1yLnR1cm4scz11Lmxlbmd0aCxsPVwiV1wiPT09dGhpcy5jb2xvcj9uLTE6bisxLGg9XCJXXCI9PT10aGlzLmNvbG9yP24tMjpuKzIscD0odGhpcy5jb2xvcixbYS0xLGErMV0pO2w8OCYmbD49MCYmIWNbbF1bYV0mJihpLnB1c2goe3g6YSx5Omx9KSwoMT09PW58fDY9PT1uKSYmaDw4JiZoPj0wJiYhci5ib2FyZFtoXVthXSYmaS5wdXNoKHt4OmEseTpofSkpO2Zvcih2YXIgZj0wO2Y8MjtmKyspZT1wW2ZdLGw8OCYmbD49MCYmY1tsXVtlXSYmY1tsXVtlXS5jb2xvciE9PXRoaXMuY29sb3ImJmkucHVzaCh7eDplLHk6bH0pO2Zvcih2YXIgeT0wO3k8Mjt5KyspZT1wW3ldLCEobz11W3MtMV0pfHxcInBhd25cIiE9PW8udHlwZXx8by50by54IT09ZXx8by50by55IT09bnx8by5jb2xvcj09PXRoaXMuY29sb3J8fDEhPT1vLmZyb20ueSYmNiE9PW8uZnJvbS55fHwzIT09biYmNCE9PW58fGkucHVzaCh7eDplLHk6bCxtb3ZlUGllY2U6e3BpZWNlOnIuYm9hcmRbbl1bZV0sZnJvbTp7eDplLHk6bn0sdG86bnVsbH19KTtyZXR1cm4gdD9yLnNpbXVsYXRlQW5kRmlsdGVyKGksdGhpcyk6aX0sci5wYXduPWZ1bmN0aW9uKHQsbyxlLHIpe3JldHVybiBuZXcgaSh0LG8sZSxyKX0sbi5wcm90b3R5cGU9ci5lbXB0eSgpLG4ucHJvdG90eXBlLmdldFZhbGlkTW92ZXM9ZnVuY3Rpb24odCl7dmFyIG89dGhpcy5nYW1lLGU9W107W1stMSwwXSxbMSwwXSxbMCwxXSxbMCwtMV1dLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHIsaSxuLGE7Zm9yKHI9MTsoaT10aGlzLngrdFswXSpyLCEoKG49dGhpcy55K3RbMV0qcik8MHx8bj43fHxpPDB8fGk+NykpJiYoIShhPW8uYm9hcmRbbl1baV0pfHxhLmNvbG9yIT09dGhpcy5jb2xvcikmJihlLnB1c2goe3g6aSx5Om59KSwhYSk7cisrKTt9LHRoaXMpO3JldHVybiB0P28uc2ltdWxhdGVBbmRGaWx0ZXIoZSx0aGlzKTplfSxyLnJvb2s9ZnVuY3Rpb24odCxvLGUscil7cmV0dXJuIG5ldyBuKHQsbyxlLHIpfSxhLnByb3RvdHlwZT1yLmVtcHR5KCksYS5wcm90b3R5cGUuZ2V0VmFsaWRNb3Zlcz1mdW5jdGlvbih0KXtmb3IodmFyIG8sZSxyPXRoaXMuZ2FtZSxpPVtdLG49W1syLDFdLFstMiwxXSxbMSwyXSxbLTEsMl0sWzIsLTFdLFstMiwtMV0sWzEsLTJdLFstMSwtMl1dLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIGMsdT0hMTtvPW5bYV1bMF0sZT1uW2FdWzFdLHRoaXMueCtvPDgmJnRoaXMueCtvPj0wJiZ0aGlzLnkrZTw4JiZ0aGlzLnkrZT49MCYmKGM9ci5ib2FyZFt0aGlzLnkrZV1bdGhpcy54K29dLHU9IWN8fGMuY29sb3IhPT10aGlzLmNvbG9yKSx1JiZpLnB1c2goe3g6dGhpcy54K28seTp0aGlzLnkrZX0pfXJldHVybiB0P3Iuc2ltdWxhdGVBbmRGaWx0ZXIoaSx0aGlzKTppfSxyLmtuaWdodD1mdW5jdGlvbih0LG8sZSxyKXtyZXR1cm4gbmV3IGEodCxvLGUscil9LGMucHJvdG90eXBlPXIuZW1wdHkoKSxjLnByb3RvdHlwZS5nZXRWYWxpZE1vdmVzPWZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuZ2FtZSxlPVtdO1tbLTEsLTFdLFsxLDFdLFstMSwxXSxbMSwtMV1dLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHIsaSxuLGE7Zm9yKHI9MTsoaT10aGlzLngrdFswXSpyLCEoKG49dGhpcy55K3RbMV0qcik8MHx8bj43fHxpPDB8fGk+NykpJiYoIShhPW8uYm9hcmRbbl1baV0pfHxhLmNvbG9yIT09dGhpcy5jb2xvcikmJihlLnB1c2goe3g6aSx5Om59KSwhYSk7cisrKTt9LHRoaXMpO3JldHVybiB0P28uc2ltdWxhdGVBbmRGaWx0ZXIoZSx0aGlzKTplfSxyLmJpc2hvcD1mdW5jdGlvbih0LG8sZSxyKXtyZXR1cm4gbmV3IGModCxvLGUscil9LHUucHJvdG90eXBlPXIuZW1wdHkoKSx1LnByb3RvdHlwZS5nZXRWYWxpZE1vdmVzPWZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuZ2FtZSxlPW4ucHJvdG90eXBlLmdldFZhbGlkTW92ZXMuY2FsbCh0aGlzKSxyPWMucHJvdG90eXBlLmdldFZhbGlkTW92ZXMuY2FsbCh0aGlzKSxpPWUuY29uY2F0KHIpO3JldHVybiB0P28uc2ltdWxhdGVBbmRGaWx0ZXIoaSx0aGlzKTppfSxyLnF1ZWVuPWZ1bmN0aW9uKHQsbyxlLHIpe3JldHVybiBuZXcgdSh0LG8sZSxyKX0scy5wcm90b3R5cGU9ci5lbXB0eSgpLHMucHJvdG90eXBlLmdldFZhbGlkTW92ZXM9ZnVuY3Rpb24odCl7dmFyIG89W10sZT1bWzAsMV0sWzAsLTFdLFsxLDFdLFstMSwtMV0sWzEsLTFdLFstMSwxXSxbLTEsMF0sWzEsMF1dLHI9dGhpcy54LGk9dGhpcy55LG49dGhpcy5nYW1lLGE9bi50dXJuLGM9dGhpcztlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGUsYT1yK3RbMF0sdT1pK3RbMV07YTw4JiZhPj0wJiZ1PDgmJnU+PTAmJigoZT1uLmJvYXJkW3VdW2FdKSYmZS5jb2xvcj09PWMuY29sb3J8fG8ucHVzaCh7eDphLHk6dX0pKX0pLGEuc29tZShmdW5jdGlvbih0KXtyZXR1cm5cImtpbmdcIj09PXQudHlwZSYmdC5jb2xvcj09PWMuY29sb3J9KXx8W1swLDIsLTFdLFs3LDYsMV1dLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9dFswXSx1PXRbMV0scz10WzJdLGw9bi5ib2FyZFtpXVtlXTtpZihsJiZcInJvb2tcIiE9PSFsLnR5cGUmJiFhLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIHQuZnJvbS54PT09ZSYmdC5mcm9tLnk9PT1pfSkpe2Zvcih2YXIgaD1yK3M7aCE9PWU7aCs9cyl7aWYobi5ib2FyZFtpXVtoXSlyZXR1cm47dmFyIHA9ITA7aWYobi5ib2FyZC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0JiZcImtpbmdcIiE9PXQudHlwZSYmdC5jb2xvciE9PWMuY29sb3ImJnQuZ2V0VmFsaWRNb3ZlcygpLmZvckVhY2goZnVuY3Rpb24odCl7dCYmdC55PT09aSYmdC54PT09aCYmKHA9ITEpfSl9KX0pLCFwKXJldHVybn12YXIgZj17eDp1LHk6aSxtb3ZlUGllY2U6e3BpZWNlOmMuZ2FtZS5ib2FyZFtpXVtlXSxmcm9tOnt4OmUseTppfSx0bzp7eTppLHg6citzfX19O28ucHVzaChmKX19KTtyZXR1cm4gdD9uLnNpbXVsYXRlQW5kRmlsdGVyKG8sYyk6b30sci5raW5nPWZ1bmN0aW9uKHQsbyxlLHIpe3JldHVybiBuZXcgcyh0LG8sZSxyKX0sby5QaWVjZT1yLG8uUGF3bj1pLG8uUm9vaz1uLG8uS25pZ2h0PWEsby5CaXNob3A9YyxvLlF1ZWVuPXUsby5LaW5nPXN9LGZ1bmN0aW9uKHQsbyxlKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1lKDApLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKSxuPWZ1bmN0aW9uKHQsbyxlKXt2YXIgcj1pLmRlZmF1bHQucHJvdG90eXBlLmluaXRpYWxpemVHYW1lKCk7ci5ib2FyZD1vLmJvYXJkLHIudHVybj1vLnR1cm4sci50aHJlZWZvbGQ9by50aHJlZWZvbGQsci5GRU49by5GRU4sci5GRU5ib2FyZD1vLkZFTmJvYXJkO2Zvcih2YXIgbixjPXIuYWxsTW92ZXMoKSx1PS05OTk5LHM9MDtzPGMubGVuZ3RoO3MrKyl7dmFyIGw9Y1tzXSxoPXIuc2ltcGxlTW92ZShsKSxwPWEodC0xLHIsLTFlNCwxZTQsIWUpO2goKSxwPj11JiYodT1wLG49bCl9cmV0dXJuIG59LGE9ZnVuY3Rpb24gdChvLGUscixpLG4pe2lmKDA9PT1vKXJldHVybi1jKGUuYm9hcmQpO3ZhciBhPWUuYWxsTW92ZXMoKTtpZihuKXtmb3IodmFyIHU9LTk5OTkscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgbD1lLnNpbXBsZU1vdmUoYVtzXSk7aWYodT1NYXRoLm1heCh1LHQoby0xLGUscixpLCFuKSksbCgpLHI9TWF0aC5tYXgocix1KSxpPD1yKXJldHVybiB1fXJldHVybiB1fWZvcih2YXIgaD05OTk5LHA9MDtwPGEubGVuZ3RoO3ArKyl7dmFyIGY9ZS5zaW1wbGVNb3ZlKGFbcF0pO2lmKGg9TWF0aC5taW4oaCx0KG8tMSxlLHIsaSwhbikpLGYoKSwoaT1NYXRoLm1pbihpLGgpKTw9cilyZXR1cm4gaH1yZXR1cm4gaH0sYz1mdW5jdGlvbih0KXtmb3IodmFyIG89MCxlPTA7ZTw4O2UrKylmb3IodmFyIHI9MDtyPDg7cisrKW8rPXUodFtlXVtyXSk7cmV0dXJuIG99LHU9ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIDA7dmFyIG89ZnVuY3Rpb24odCl7cmV0dXJuXCJwYXduXCI9PT10LnR5cGU/MTA6XCJyb29rXCI9PT10LnR5cGU/NTA6XCJrbmlnaHRcIj09PXQudHlwZT8zMDpcImJpc2hvcFwiPT09dC50eXBlPzMwOlwicXVlZW5cIj09PXQudHlwZT85MDpcImtpbmdcIj09PXQudHlwZT85MDA6dm9pZCAwfSh0LHQuY29sb3IpO3JldHVyblwiV1wiPT09dC5jb2xvcj9vOi1vfTtvLmRlZmF1bHQ9bn0sZnVuY3Rpb24odCxvLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG8uQUk9by5QaWVjZXM9by5HYW1lPXZvaWQgMDt2YXIgaT1lKDApLG49cihpKSxhPWUoMSksYz1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIG89e307aWYobnVsbCE9dClmb3IodmFyIGUgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmKG9bZV09dFtlXSk7cmV0dXJuIG8uZGVmYXVsdD10LG99KGEpLHU9ZSgyKSxzPXIodSk7by5HYW1lPW4uZGVmYXVsdCxvLlBpZWNlcz1jLG8uQUk9cy5kZWZhdWx0fV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yc2ctY2hlc3MvbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=